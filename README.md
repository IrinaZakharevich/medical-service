# Сервис терминологии и REST API #
Этот проект представляет собой сервис терминологии, который предоставляет REST API для управления справочниками, их версиями и элементами. Сервис разработан на Python с использованием Django и Django REST Framework. В качестве базы данных используется SQLite.

Описание проекта
Сервис предназначен для хранения и управления справочниками, которые содержат коды и их значения. Эти справочники используются для однозначного кодирования данных в электронных документах, что позволяет участникам обмена понимать и интерпретировать данные одинаково.

Пример использования
Справочник "Специальности медицинских работников" может содержать следующие данные:

 - Код справочника: 1

 - Версия справочника: 1.0

 - Дата публикации: 01.01.2022

 - Элементы справочника:

    1 - Врач-терапевт
    
    2 - Травматолог-ортопед
    
    3 - Хирург

В электронном документе эти коды используются для указания специальностей врачей, например:

```json
"direction": {
    "patient": {
       "full_name": "Иванов Иван Иванович"
    },
    "doctor_from": {
       "full_name": "Петров Петр Петрович",
       "spec_code": 1
    },
    "doctor_to": {
       "full_name": "Сидоров Сидор Сидорович",
       "spec_code": 2
    },
    "diagnosis": {
       "dia_code": "S99"
    }
}
```
*API*

API предоставляет следующие методы:

- Получение списка справочников
    Метод: `GET /refbooks/ [?date=<date>]`
    Параметры:
    
    date (опционально): Дата в формате ГГГГ-ММ-ДД. Если указана, возвращаются справочники с версиями, действующими на эту дату.

    Пример запроса:
    ```GET /refbooks/?date=2022-10-01```

    Пример ответа:

    ```json
    {
        "refbooks": [
            {
                "id": "1",
                "code": "MS1",
                "name": "Специальности медицинских работников"
            },
            {
                "id": "2",
                "code": "ICD-10",
                "name": "Международный классификатор болезней (МКБ-10)"
            }
        ]
    }
    ```
  

*Получение элементов справочника*
Метод: `GET /refbooks/<id>/elements [?version=<version>]`
Параметры:

- id: Идентификатор справочника.

- version (опционально): Версия справочника. Если не указана, возвращаются элементы текущей версии.

```GET /refbooks/1/elements?version=1.0```
```json
{
    "elements": [
        {
            "code": "1",
            "value": "Врач-терапевт"
        },
        {
            "code": "2",
            "value": "Травматолог-ортопед"
        }
    ]
}
```

*Валидация элемента справочника*
Метод: `GET /refbooks/<id>/check_element?code=<code>&value=<value> [&version=<version>]`
Параметры:

- id: Идентификатор справочника.

- code: Код элемента.

- value: Значение элемента.

- version (опционально): Версия справочника. Если не указана, проверяется текущая версия.

Пример запроса:

```GET /refbooks/1/check_element?code=1&value=Врач-терапевт&version=1.0```
Пример ответа:

```json
{
    "valid": true
}
```

# Установка и запуск #


*Установка*

Клонируйте репозиторий:

`git clone https://github.com/yourusername/refbook-api.git`

Создайте виртуальное окружение:

`python -m venv venv`

Активируйте виртуальное окружение:

`.\venv\Scripts\activate`

Установите зависимости:

`pip install -r requirements.txt`

Выполните миграции:

`python manage.py migrate`

Создайте суперпользователя:

`python manage.py createsuperuser`

Введите имя пользователя, email (опционально) и пароль.

Запустите сервер разработки:

`python manage.py runserver`

# Тестирование #

Для API написаны тесты. Запустите их с помощью команды:

`python manage.py test`

# Документация API #
Документация API доступна через Swagger. После запуска сервера перейдите по адресу:

`http://localhost:8000/swagger/`
